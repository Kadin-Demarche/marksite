<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if title %}{{ title }} - {% endif %}{{ site.title }}</title>
  
  <!-- SEO -->
  <meta name="description" content="{{ excerpt or description or site.description }}">
  <meta name="author" content="{{ author or site.author }}">
  {% if tags %}
  <meta name="keywords" content="{{ tags | join(', ') }}">
  {% endif %}
  
  <!-- Open Graph -->
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:title" content="{{ title or site.title }}">
  <meta property="og:description" content="{{ excerpt or description or site.description }}">
  <meta property="og:type" content="{% if layout == 'post' %}article{% else %}website{% endif %}">
  <meta property="og:url" content="{{ site.url }}{{ url or '/' }}">
  <meta property="og:image" content="{{ site.url }}{{ site.baseUrl }}/assets/images/og-default.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  {% if layout == 'post' and date %}
  <meta property="article:published_time" content="{{ date | date('yyyy-MM-dd') }}">
  <meta property="article:author" content="{{ author or site.author }}">
  {% for tag in tags %}
  <meta property="article:tag" content="{{ tag }}">
  {% endfor %}
  {% endif %}
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ title or site.title }}">
  <meta name="twitter:description" content="{{ excerpt or description or site.description }}">
  <meta name="twitter:image" content="{{ site.url }}{{ site.baseUrl }}/assets/images/og-default.png">
  {% if site.social and site.social.twitter %}
  <meta name="twitter:site" content="@{{ site.social.twitter }}">
  <meta name="twitter:creator" content="@{{ site.social.twitter }}">
  {% endif %}
  
  <!-- Favicon -->
  <link rel="icon" href="{{ site.baseUrl }}/assets/images/favicon.ico">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="{{ site.baseUrl }}/assets/css/style.css">
  
  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ site.baseUrl }}/feed.xml">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ site.url }}{{ url or '/' }}">
  
  {% if layout == 'post' %}
  <!-- Article Schema (JSON-LD) for Rich Snippets -->
  {% set schemaJson = '{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "' + (title | jsonEscape) + '",
    "description": "' + ((excerpt or description or site.description) | jsonEscape) + '",
    "author": {
      "@type": "Person",
      "name": "' + ((author or site.author) | jsonEscape) + '",
      "url": "' + site.url + '"
    },
    "publisher": {
      "@type": "Organization",
      "name": "' + (site.title | jsonEscape) + '",
      "logo": {
        "@type": "ImageObject",
        "url": "' + site.url + site.baseUrl + '/assets/images/og-default.png"
      }
    },
    "datePublished": "' + (date | date('yyyy-MM-dd')) + 'T' + (date | date('HH:mm:ss')) + 'Z",
    "dateModified": "' + (date | date('yyyy-MM-dd')) + 'T' + (date | date('HH:mm:ss')) + 'Z",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "' + site.url + url + '"
    },
    "image": "' + site.url + site.baseUrl + '/assets/images/og-default.png",
    "url": "' + site.url + url + '"' + 
    (',"keywords": "' + (tags | join(', ') | jsonEscape) + '"' if tags and tags.length > 0 else '') +
    (',"timeRequired": "' + (readingTime | jsonEscape) + '"' if readingTime else '') +
    ',"articleSection": "Technology",
    "inLanguage": "en-US"
  }' %}
  <script type="application/ld+json">{{ schemaJson | safe }}</script>
  {% endif %}
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <a href="{{ site.baseUrl }}/" class="nav-brand">{{ site.title }}</a>
      <ul class="nav-menu">
        {% for item in navigation %}
        <li><a href="{{ site.baseUrl }}{{ item.url }}">{{ item.title }}</a></li>
        {% endfor %}
        {% if features.search %}
        <li><a href="{{ site.baseUrl }}/search/">üîç</a></li>
        {% endif %}
        {% if features.darkMode %}
        <li><button class="dark-mode-toggle" id="darkModeToggle" aria-label="Toggle dark mode">üåô</button></li>
        {% endif %}
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>&copy; {{ "now" | date("yyyy") }} {{ site.author }}. All rights reserved.</p>
      <div class="social-links">
        {% if social.github %}
        <a href="https://github.com/{{ social.github }}" target="_blank" rel="noopener">GitHub</a>
        {% endif %}
        {% if social.twitter %}
        <a href="https://twitter.com/{{ social.twitter }}" target="_blank" rel="noopener">Twitter</a>
        {% endif %}
        {% if social.linkedin %}
        <a href="https://linkedin.com/in/{{ social.linkedin }}" target="_blank" rel="noopener">LinkedIn</a>
        {% endif %}
      </div>
      <p class="rss-link"><a href="{{ site.baseUrl }}/feed.xml">RSS Feed</a></p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="{{ site.baseUrl }}/assets/js/main.js"></script>
  {% if features.search %}
  <script src="{{ site.baseUrl }}/assets/js/search.js"></script>
  {% endif %}
</body>
</html>

