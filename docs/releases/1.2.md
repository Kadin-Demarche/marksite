# MarkSite 1.2 Release Notes

_2025-12-02_

## Highlights
- **Base URL correctness**: Canonical/OG/Twitter/meta links, JSON-LD, and share URLs now honor `site.url` + `site.baseUrl`, fixing subpath deployments (e.g., GitHub Pages project sites).
- **Stable tag & category slugs**: Tag/category pages, sitemap entries, and search index entries now share the same slugified paths to prevent broken links.
- **Search that respects base paths**: Search index fetches and result links work under subdirectories; tag filters can be preselected via `?tag=foo&tag=bar`.
- **Safer dev server**: `serve` points at the actual build destination and fails fast if the build output is missing.
- **CLI health check script**: `npm run doctor` is available out of the box to validate config/content.

## Changes
- Normalized site/base URL handling in templates and feeds so every generated link is absolute and base-path aware (`lib/template.js`, `templates/base.html`, `templates/post.html`, `lib/rss.js`).
- Tag/category slugs are consistently normalized across pages, sitemaps, and search index (`lib/builder.js`, `lib/search.js`, `lib/sitemap.js`).
- Search now prefixes all fetches/links with the configured base path and respects multiple `tag` query params (`assets/js/search.js`).
- Dev server validates the build directory before serving to avoid silent failures when `_site` is missing (`lib/server.js`).
- Added a `doctor` npm script so health checks are easy to run (`package.json`).

## Things to Know
- Set both `site.url` and `site.baseUrl` in `config.yaml` when deploying to a subpath; all canonical/share/feed URLs will follow suit.
- Existing tags/categories are auto-slugged; URLs are lowercase and hyphenated.
- If you migrate content out of `content/`, point commands at your new content dir (or set `MARKSITE_CONTENT_DIR`).

## Tests
- `npm run build`
- `npm run doctor`
